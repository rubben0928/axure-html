<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨´é¡˜ç­”è¾¯æ›¸AIè¼”åŠ©ç³»çµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'PingFang TC', 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .panel {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .panel-title {
            font-size: 1.5em;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .step-indicator {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .step {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: #f0f0f0;
            border-radius: 8px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .step.active {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        .step.completed {
            background: #28a745;
            color: white;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result-section {
            margin-top: 20px;
        }

        .issue-card {
            background: #f8f9ff;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .issue-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .issue-content {
            color: #555;
            line-height: 1.8;
        }

        .law-reference {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .law-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 8px;
        }

        .case-reference {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .case-title {
            font-weight: bold;
            color: #155724;
            margin-bottom: 8px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 25px;
            background: #f0f0f0;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .suggestion-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            margin-right: 8px;
        }

        .badge-procedure {
            background: #007bff;
            color: white;
        }

        .badge-substantive {
            background: #dc3545;
            color: white;
        }

        .badge-fact {
            background: #28a745;
            color: white;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .output-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            border: 2px solid #dee2e6;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .file-upload {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .file-upload:hover {
            background: #f8f9ff;
            border-color: #5568d3;
        }

        .file-upload input {
            display: none;
        }

        .uploaded-file {
            background: #d4edda;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .uploaded-file.active {
            display: block;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¤– è¨´é¡˜ç­”è¾¯æ›¸AIè¼”åŠ©ç³»çµ±</h1>
            <p class="subtitle">æ™ºèƒ½åˆ†æ Â· ç²¾æº–å»ºè­° Â· é«˜æ•ˆå”ä½œ</p>
        </header>

        <!-- æ­¥é©ŸæŒ‡ç¤ºå™¨ -->
        <div class="panel">
            <div class="step-indicator">
                <div class="step active" id="step1">1. ä¸Šå‚³è¨´é¡˜æ›¸</div>
                <div class="step" id="step2">2. AIåˆ†æçˆ­é»</div>
                <div class="step" id="step3">3. æ³•è¦æª¢ç´¢</div>
                <div class="step" id="step4">4. ç”Ÿæˆç­”è¾¯æ¶æ§‹</div>
                <div class="step" id="step5">5. å®Œæˆç­”è¾¯æ›¸</div>
            </div>
        </div>

        <div class="main-content">
            <!-- å·¦å´ï¼šè¼¸å…¥å€ -->
            <div class="panel">
                <div class="panel-title">
                    ğŸ“ è¨´é¡˜æ›¸å…§å®¹è¼¸å…¥
                </div>

                <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                    <div style="font-size: 3em; margin-bottom: 15px;">ğŸ“„</div>
                    <div style="font-size: 1.2em; color: #667eea; font-weight: bold;">é»æ“Šä¸Šå‚³è¨´é¡˜æ›¸æª”æ¡ˆ</div>
                    <div style="color: #666; margin-top: 10px;">æ”¯æ´ PDFã€Wordã€TXT æ ¼å¼</div>
                    <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.txt">
                </div>

                <div class="uploaded-file" id="uploadedFile">
                    <strong>âœ“ å·²ä¸Šå‚³ï¼š</strong><span id="fileName"></span>
                    <button onclick="removeFile()" style="float: right; background: #dc3545; color: white; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer;">ç§»é™¤</button>
                </div>

                <div style="text-align: center; margin: 15px 0; color: #999;">æˆ–</div>

                <textarea id="appealInput" placeholder="è«‹è²¼ä¸Šè¨´é¡˜æ›¸å…§å®¹ï¼Œæˆ–ç›´æ¥è¼¸å…¥è¨´é¡˜äººçš„ä¸»å¼µå’Œç†ç”±...

ç¯„ä¾‹ï¼š
è¨´é¡˜äººä¸»å¼µï¼š
ä¸€ã€åŸè™•åˆ†æ©Ÿé—œæ–¼æ°‘åœ‹113å¹´5æœˆ1æ—¥ä½œæˆä¹‹è™•åˆ†æ›¸ï¼Œèªå®šæœ¬äººé•åå»ºç¯‰æ³•ç¬¬25æ¢è¦å®šï¼Œè™•ä»¥ç½°é°æ–°è‡ºå¹£6è¬å…ƒï¼Œé¡¯æœ‰é•èª¤ã€‚
äºŒã€æœ¬æ¡ˆå»ºç¯‰ç‰©ä¿‚æ–¼90å¹´é–“å³å·²å­˜åœ¨ï¼Œä¸¦éæœ¬äººæ‰€å»ºï¼ŒåŸè™•åˆ†æ©Ÿé—œæœªæŸ¥æ˜äº‹å¯¦ï¼Œé€•äºˆè™•ç½°ï¼Œé¡¯æœ‰é•èª¤..."></textarea>

                <div class="button-group">
                    <button class="btn-primary" onclick="startAnalysis()">ğŸ” é–‹å§‹AIåˆ†æ</button>
                    <button class="btn-secondary" onclick="clearInput()">ğŸ—‘ï¸ æ¸…é™¤å…§å®¹</button>
                </div>
            </div>

            <!-- å³å´ï¼šAIåˆ†æçµæœ -->
            <div class="panel">
                <div class="panel-title">
                    ğŸ¤– AIåˆ†æçµæœ
                    <span id="analysisStatus" style="font-size: 0.8em; color: #999;">ç­‰å¾…è¼¸å…¥...</span>
                </div>

                <div id="loadingSection" class="loading">
                    <div class="spinner"></div>
                    <div>AIæ­£åœ¨åˆ†æä¸­...</div>
                    <div style="font-size: 0.9em; color: #999; margin-top: 10px;">é è¨ˆéœ€è¦ 5-10 ç§’</div>
                </div>

                <div id="resultSection" class="result-section" style="display: none;">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="stat-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="issueCount">0</div>
                            <div class="stat-label">çˆ­é»æ•¸é‡</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="lawCount">0</div>
                            <div class="stat-label">ç›¸é—œæ³•æ¢</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="caseCount">0</div>
                            <div class="stat-label">é¡ä¼¼æ¡ˆä¾‹</div>
                        </div>
                    </div>

                    <!-- åˆ†é æ¨™ç±¤ -->
                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('issues')">çˆ­é»æ•´ç†</button>
                        <button class="tab" onclick="switchTab('laws')">æ³•è¦æª¢ç´¢</button>
                        <button class="tab" onclick="switchTab('cases')">é¡ä¼¼æ¡ˆä¾‹</button>
                        <button class="tab" onclick="switchTab('structure')">ç­”è¾¯æ¶æ§‹</button>
                    </div>

                    <!-- çˆ­é»æ•´ç†å…§å®¹ -->
                    <div id="issues" class="tab-content active">
                        <div id="issuesContent"></div>
                    </div>

                    <!-- æ³•è¦æª¢ç´¢å…§å®¹ -->
                    <div id="laws" class="tab-content">
                        <div id="lawsContent"></div>
                    </div>

                    <!-- é¡ä¼¼æ¡ˆä¾‹å…§å®¹ -->
                    <div id="cases" class="tab-content">
                        <div id="casesContent"></div>
                    </div>

                    <!-- ç­”è¾¯æ¶æ§‹å…§å®¹ -->
                    <div id="structure" class="tab-content">
                        <div id="structureContent"></div>
                    </div>

                    <div class="button-group" style="margin-top: 25px;">
                        <button class="btn-success" onclick="generateDraft()">ğŸ“„ ç”Ÿæˆç­”è¾¯æ›¸è‰ç¨¿</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç­”è¾¯æ›¸è‰ç¨¿è¼¸å‡º -->
        <div class="panel full-width" id="draftSection" style="display: none;">
            <div class="panel-title">
                ğŸ“‹ ç­”è¾¯æ›¸è‰ç¨¿
                <button class="btn-primary" style="flex: none; padding: 10px 20px; font-size: 0.9em;" onclick="exportDraft()">ğŸ“¥ åŒ¯å‡ºWord</button>
            </div>
            <div id="draftOutput" class="output-section"></div>
            <div class="button-group" style="margin-top: 20px;">
                <button class="btn-primary" onclick="editDraft()">âœï¸ é€²å…¥ç·¨è¼¯æ¨¡å¼</button>
                <button class="btn-secondary" onclick="regenerateDraft()">ğŸ”„ é‡æ–°ç”Ÿæˆ</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let analysisData = null;

        // æª”æ¡ˆä¸Šå‚³è™•ç†
        document.getElementById('fileInput').addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                document.getElementById('fileName').textContent = file.name;
                document.getElementById('uploadedFile').classList.add('active');
                
                // æ¨¡æ“¬è®€å–æª”æ¡ˆå…§å®¹
                setTimeout(() => {
                    document.getElementById('appealInput').value = `[å·²å¾æª”æ¡ˆè¼‰å…¥å…§å®¹ï¼š${file.name}]\n\nè¨´é¡˜äººä¸»å¼µï¼š\nä¸€ã€åŸè™•åˆ†æ©Ÿé—œæ–¼æ°‘åœ‹113å¹´5æœˆ1æ—¥ä½œæˆä¹‹è™•åˆ†æ›¸ï¼Œèªå®šæœ¬äººé•åå»ºç¯‰æ³•ç¬¬25æ¢è¦å®šï¼Œè™•ä»¥ç½°é°æ–°è‡ºå¹£6è¬å…ƒï¼Œé¡¯æœ‰é•èª¤ã€‚\näºŒã€æœ¬æ¡ˆå»ºç¯‰ç‰©ä¿‚æ–¼90å¹´é–“å³å·²å­˜åœ¨ï¼Œä¸¦éæœ¬äººæ‰€å»ºï¼ŒåŸè™•åˆ†æ©Ÿé—œæœªæŸ¥æ˜äº‹å¯¦ï¼Œé€•äºˆè™•ç½°ï¼Œé¡¯æœ‰é•èª¤ã€‚\nä¸‰ã€åŸè™•åˆ†æ©Ÿé—œæœªè¸è¡Œæ­£ç•¶æ³•å¾‹ç¨‹åºï¼Œæœªçµ¦äºˆæœ¬äººé™³è¿°æ„è¦‹ä¹‹æ©Ÿæœƒï¼Œç¨‹åºé¡¯æœ‰ç‘•ç–µ...`;
                }, 500);
            }
        });

        function removeFile() {
            document.getElementById('fileInput').value = '';
            document.getElementById('uploadedFile').classList.remove('active');
        }

        function clearInput() {
            document.getElementById('appealInput').value = '';
            removeFile();
        }

        function updateStep(step) {
            for (let i = 1; i <= 5; i++) {
                const stepEl = document.getElementById('step' + i);
                stepEl.classList.remove('active', 'completed');
                if (i < step) {
                    stepEl.classList.add('completed');
                } else if (i === step) {
                    stepEl.classList.add('active');
                }
            }
            currentStep = step;
        }

        function startAnalysis() {
            const input = document.getElementById('appealInput').value.trim();
            if (!input) {
                alert('è«‹å…ˆè¼¸å…¥è¨´é¡˜æ›¸å…§å®¹æˆ–ä¸Šå‚³æª”æ¡ˆï¼');
                return;
            }

            // é¡¯ç¤ºè¼‰å…¥å‹•ç•«
            document.getElementById('loadingSection').classList.add('active');
            document.getElementById('resultSection').style.display = 'none';
            document.getElementById('analysisStatus').textContent = 'åˆ†æä¸­...';
            updateStep(2);

            // æ¨¡æ“¬AIåˆ†æï¼ˆå¯¦éš›æ‡‰ç”¨ä¸­é€™è£¡æœƒå‘¼å«APIï¼‰
            setTimeout(() => {
                performAnalysis(input);
                document.getElementById('loadingSection').classList.remove('active');
                document.getElementById('resultSection').style.display = 'block';
                document.getElementById('analysisStatus').textContent = 'åˆ†æå®Œæˆ âœ“';
                document.getElementById('analysisStatus').style.color = '#28a745';
                updateStep(3);
            }, 3000);
        }

        function performAnalysis(input) {
            // æ¨¡æ“¬AIåˆ†æçµæœ
            analysisData = {
                issues: [
                    {
                        id: 1,
                        type: 'substantive',
                        title: 'å¯¦é«”çˆ­é»ï¼šé•ç« å»ºç¯‰äº‹å¯¦èªå®š',
                        content: 'è¨´é¡˜äººä¸»å¼µå»ºç¯‰ç‰©æ–¼90å¹´é–“å³å·²å­˜åœ¨ï¼Œéå…¶æ‰€å»ºã€‚åŸè™•åˆ†æ©Ÿé—œæ‡‰èˆ‰è­‰è­‰æ˜è¨´é¡˜äººç‚ºé•å»ºè¡Œç‚ºäººï¼Œå¦å‰‡è™•ç½°å°è±¡éŒ¯èª¤ã€‚',
                        lawBasis: 'å»ºç¯‰æ³•ç¬¬25æ¢ã€è¡Œæ”¿ç½°æ³•ç¬¬7æ¢',
                        suggestions: [
                            'æ‡‰èª¿é–±èˆªç…§åœ–æˆ–åœ°ç±è³‡æ–™ï¼Œç¢ºèªå»ºç‰©èˆˆå»ºæ™‚é–“',
                            'æŸ¥æ˜åœŸåœ°åŠå»ºç‰©æ‰€æœ‰æ¬Šäººè®Šå‹•æ­·ç¨‹',
                            'ç¢ºèªè¨´é¡˜äººæ˜¯å¦ç‚ºå»ºç¯‰æ³•æ‰€ç¨±ä¹‹ã€Œèµ·é€ äººã€'
                        ]
                    },
                    {
                        id: 2,
                        type: 'procedure',
                        title: 'ç¨‹åºçˆ­é»ï¼šé™³è¿°æ„è¦‹æ©Ÿæœƒ',
                        content: 'è¨´é¡˜äººä¸»å¼µæœªç²é™³è¿°æ„è¦‹æ©Ÿæœƒï¼Œç¨‹åºé•æ³•ã€‚éœ€æª¢è¦–æ˜¯å¦è¸è¡Œè¡Œæ”¿ç¨‹åºæ³•ç¬¬102æ¢è¦å®šã€‚',
                        lawBasis: 'è¡Œæ”¿ç¨‹åºæ³•ç¬¬102æ¢',
                        suggestions: [
                            'æª¢é™„é€šçŸ¥æ›¸ã€é€é”è­‰æ›¸ç­‰è­‰æ˜å·²çµ¦äºˆé™³è¿°æ„è¦‹æ©Ÿæœƒ',
                            'è‹¥ç¢ºæœªé€šçŸ¥ï¼Œèªªæ˜æ˜¯å¦ç¬¦åˆç¬¬103æ¢ä¾‹å¤–æƒ…å½¢',
                            'èªªæ˜ä½•æ™‚ã€ä½•æ–¹å¼é€šçŸ¥ç•¶äº‹äººé™³è¿°æ„è¦‹'
                        ]
                    },
                    {
                        id: 3,
                        type: 'fact',
                        title: 'äº‹å¯¦çˆ­é»ï¼šç½°é°é‡‘é¡é©ç•¶æ€§',
                        content: 'è¨´é¡˜äººå°ç½°é°6è¬å…ƒä¹‹è£ç½°é‡‘é¡æœ‰æ‰€çˆ­åŸ·ï¼Œæ‡‰èªªæ˜è£é‡åŸºæº–ã€‚',
                        lawBasis: 'å»ºç¯‰æ³•ç¬¬86æ¢ã€è¡Œæ”¿ç½°æ³•ç¬¬18æ¢',
                        suggestions: [
                            'èªªæ˜è£é‡æ™‚è€ƒé‡ä¹‹å› ç´ ï¼ˆé•è¦é¢ç©ã€æƒ…ç¯€è¼•é‡ç­‰ï¼‰',
                            'æª¢é™„è£ç½°åŸºæº–è¡¨æˆ–ç›¸é—œè¦å®š',
                            'æ¯”è¼ƒé¡ä¼¼æ¡ˆä¾‹ä¹‹è£ç½°é‡‘é¡ï¼Œèªªæ˜æœªé€¾è¶Šè£é‡æ¬Š'
                        ]
                    }
                ],
                laws: [
                    {
                        title: 'å»ºç¯‰æ³•ç¬¬25æ¢',
                        content: 'å»ºç¯‰ç‰©éç¶“ç”³è«‹ç›´è½„å¸‚ã€ç¸£ï¼ˆå¸‚ï¼‰ï¼ˆå±€ï¼‰ä¸»ç®¡å»ºç¯‰æ©Ÿé—œä¹‹å¯©æŸ¥è¨±å¯ä¸¦ç™¼çµ¦åŸ·ç…§ï¼Œä¸å¾—æ“…è‡ªå»ºé€ æˆ–ä½¿ç”¨æˆ–æ‹†é™¤ã€‚',
                        relevance: 'æœ¬æ¡ˆè™•ç½°ä¹‹ä¸»è¦æ³•å¾‹ä¾æ“š'
                    },
                    {
                        title: 'å»ºç¯‰æ³•ç¬¬86æ¢',
                        content: 'é•åç¬¬25æ¢è¦å®šè€…ï¼Œè™•ä»¥å»ºç¯‰ç‰©é€ åƒ¹åƒåˆ†ä¹‹äº”åä»¥ä¸‹ç½°é°ï¼Œä¸¦å‹’ä»¤åœå·¥è£œè¾¦æ‰‹çºŒï¼›å¿…è¦æ™‚å¾—å¼·åˆ¶æ‹†é™¤å…¶å»ºç¯‰ç‰©ã€‚',
                        relevance: 'ç½°é°é‡‘é¡è¨ˆç®—ä¹‹æ³•å¾‹ä¾æ“š'
                    },
                    {
                        title: 'è¡Œæ”¿ç¨‹åºæ³•ç¬¬102æ¢',
                        content: 'è¡Œæ”¿æ©Ÿé—œä½œæˆé™åˆ¶æˆ–å‰å¥ªäººæ°‘è‡ªç”±æˆ–æ¬Šåˆ©ä¹‹è¡Œæ”¿è™•åˆ†å‰ï¼Œé™¤å·²ä¾ç¬¬39æ¢è¦å®šï¼Œé€šçŸ¥è™•åˆ†ç›¸å°äººé™³è¿°æ„è¦‹ï¼Œæˆ–æ±ºå®šèˆ‰è¡Œè½è­‰è€…å¤–ï¼Œæ‡‰çµ¦äºˆè©²è™•åˆ†ç›¸å°äººé™³è¿°æ„è¦‹ä¹‹æ©Ÿæœƒã€‚',
                        relevance: 'ç¨‹åºç‘•ç–µçˆ­é»ä¹‹æ³•å¾‹ä¾æ“š'
                    },
                    {
                        title: 'è¡Œæ”¿ç½°æ³•ç¬¬7æ¢',
                        content: 'é•åè¡Œæ”¿æ³•ä¸Šç¾©å‹™ä¹‹è¡Œç‚ºéå‡ºæ–¼æ•…æ„æˆ–éå¤±è€…ï¼Œä¸äºˆè™•ç½°ã€‚',
                        relevance: 'è¡Œç‚ºäººèªå®šä¹‹æ³•å¾‹ä¾æ“š'
                    }
                ],
                cases: [
                    {
                        title: 'æœ€é«˜è¡Œæ”¿æ³•é™¢108å¹´åº¦åˆ¤å­—ç¬¬123è™Ÿåˆ¤æ±º',
                        summary: 'é—œæ–¼é•ç« å»ºç¯‰ä¹‹è™•ç½°å°è±¡ï¼Œæ‡‰ä»¥å¯¦éš›å»ºç¯‰è¡Œç‚ºäººç‚ºæº–ï¼Œéä»¥åœŸåœ°æˆ–å»ºç‰©æ‰€æœ‰æ¬Šäººç‚ºç•¶ç„¶è™•ç½°å°è±¡ã€‚',
                        relevance: 'æ”¯æŒæ‡‰æŸ¥æ˜å¯¦éš›å»ºç¯‰è¡Œç‚ºäººä¹‹è«–é»'
                    },
                    {
                        title: 'è¨´é¡˜æ±ºå®šæ¡ˆè™Ÿï¼šåŒ—åºœè¨´æ±ºå­—ç¬¬1120001è™Ÿ',
                        summary: 'åŸè™•åˆ†æ©Ÿé—œæœªçµ¦äºˆé™³è¿°æ„è¦‹æ©Ÿæœƒï¼Œæ’¤éŠ·åŸè™•åˆ†ï¼Œç”±åŸè™•åˆ†æ©Ÿé—œå¦ç‚ºé©æ³•è™•åˆ†ã€‚',
                        relevance: 'ç¨‹åºç‘•ç–µå¯èƒ½å°è‡´æ’¤éŠ·ä¹‹åƒè€ƒæ¡ˆä¾‹'
                    },
                    {
                        title: 'è‡ºåŒ—é«˜ç­‰è¡Œæ”¿æ³•é™¢109å¹´åº¦è¨´å­—ç¬¬456è™Ÿåˆ¤æ±º',
                        summary: 'ç½°é°é‡‘é¡ä¹‹è£é‡æ‡‰ç¬¦åˆæ¯”ä¾‹åŸå‰‡ï¼Œéé«˜æˆ–éä½å‡å±¬è£é‡ç‘•ç–µã€‚',
                        relevance: 'è£é‡æ¬Šè¡Œä½¿ä¹‹åƒè€ƒæ¨™æº–'
                    }
                ]
            };

            // æ›´æ–°çµ±è¨ˆæ•¸æ“š
            document.getElementById('issueCount').textContent = analysisData.issues.length;
            document.getElementById('lawCount').textContent = analysisData.laws.length;
            document.getElementById('caseCount').textContent = analysisData.cases.length;

            // æ¸²æŸ“çˆ­é»å…§å®¹
            renderIssues();
            renderLaws();
            renderCases();
            renderStructure();
        }

        function renderIssues() {
            const container = document.getElementById('issuesContent');
            container.innerHTML = '';

            analysisData.issues.forEach(issue => {
                const badgeClass = issue.type === 'procedure' ? 'badge-procedure' : 
                                  issue.type === 'substantive' ? 'badge-substantive' : 'badge-fact';
                const badgeText = issue.type === 'procedure' ? 'ç¨‹åº' : 
                                issue.type === 'substantive' ? 'å¯¦é«”' : 'äº‹å¯¦';

                const issueCard = document.createElement('div');
                issueCard.className = 'issue-card';
                issueCard.innerHTML = `
                    <div class="issue-title">
                        <span class="badge ${badgeClass}">${badgeText}</span>
                        ${issue.title}
                    </div>
                    <div class="issue-content">
                        <p><strong>çˆ­é»èªªæ˜ï¼š</strong>${issue.content}</p>
                        <p style="margin-top: 10px;"><strong>ç›¸é—œæ³•æ¢ï¼š</strong>${issue.lawBasis}</p>
                        <div class="suggestion-box" style="margin-top: 15px;">
                            <strong>ğŸ’¡ AIå»ºè­°ç­”è¾¯è¦é»ï¼š</strong>
                            <ul style="margin-top: 10px;">
                                ${issue.suggestions.map(s => `<li style="margin: 8px 0;">${s}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                container.appendChild(issueCard);
            });
        }

        function renderLaws() {
            const container = document.getElementById('lawsContent');
            container.innerHTML = '';

            analysisData.laws.forEach(law => {
                const lawCard = document.createElement('div');
                lawCard.className = 'law-reference';
                lawCard.innerHTML = `
                    <div class="law-title">ğŸ“– ${law.title}</div>
                    <p style="margin: 10px 0; line-height: 1.8;">${law.content}</p>
                    <p style="color: #856404; margin-top: 10px;"><strong>ç›¸é—œæ€§ï¼š</strong>${law.relevance}</p>
                `;
                container.appendChild(lawCard);
            });
        }

        function renderCases() {
            const container = document.getElementById('casesContent');
            container.innerHTML = '';

            analysisData.cases.forEach(caseRef => {
                const caseCard = document.createElement('div');
                caseCard.className = 'case-reference';
                caseCard.innerHTML = `
                    <div class="case-title">âš–ï¸ ${caseRef.title}</div>
                    <p style="margin: 10px 0; line-height: 1.8;"><strong>æ¡ˆä¾‹æ‘˜è¦ï¼š</strong>${caseRef.summary}</p>
                    <p style="color: #155724; margin-top: 10px;"><strong>åƒè€ƒåƒ¹å€¼ï¼š</strong>${caseRef.relevance}</p>
                `;
                container.appendChild(caseCard);
            });
        }

        function renderStructure() {
            const container = document.getElementById('structureContent');
            container.innerHTML = `
                <div class="suggestion-box">
                    <h3 style="color: #667eea; margin-bottom: 20px;">å»ºè­°ç­”è¾¯æ›¸æ¶æ§‹</h3>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #764ba2; margin-bottom: 10px;">å£¹ã€ç•¶äº‹äºº</h4>
                        <p style="margin-left: 20px; line-height: 1.8;">
                            è¨´é¡˜äººï¼š[å§“å]<br>
                            åŸè™•åˆ†æ©Ÿé—œï¼š[æ©Ÿé—œåç¨±]
                        </p>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #764ba2; margin-bottom: 10px;">è²³ã€è¨´é¡˜æ¨™çš„</h4>
                        <p style="margin-left: 20px; line-height: 1.8;">
                            æœ¬æ©Ÿé—œæ–¼æ°‘åœ‹113å¹´5æœˆ1æ—¥ä»¥â—‹â—‹å­—ç¬¬â—‹â—‹è™Ÿå‡½æ‰€ç‚ºè™•åˆ†æ›¸ã€‚
                        </p>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #764ba2; margin-bottom: 10px;">åƒã€äº‹å¯¦ç¶“é</h4>
                        <p style="margin-left: 20px; line-height: 1.8;">
                            ä¸€ã€æœ¬æ¡ˆç·£èµ·...<br>
                            äºŒã€æœ¬æ©Ÿé—œå—ç†å¾Œ...<br>
                            ä¸‰ã€ç¶“æŸ¥è­‰çµæœ...
                        </p>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #764ba2; margin-bottom: 10px;">è‚†ã€ç­”è¾¯ç†ç”±</h4>
                        <div style="margin-left: 20px;">
                            ${analysisData.issues.map((issue, index) => `
                                <div style="margin-bottom: 20px;">
                                    <p style="font-weight: bold; color: #667eea;">
                                        ${['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”'][index]}ã€é‡å°è¨´é¡˜äººã€Œ${issue.title}ã€ä¹‹ä¸»å¼µ
                                    </p>
                                    <div style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                                        <p>ï¼ˆä¸€ï¼‰è¨´é¡˜äººä¸»å¼µç•¥ä»¥ï¼š${issue.content}</p>
                                        <p style="margin-top: 10px;">ï¼ˆäºŒï¼‰æœ¬æ©Ÿé—œç­”è¾¯ï¼š</p>
                                        <ul style="margin-left: 30px; margin-top: 8px;">
                                            ${issue.suggestions.map(s => `<li style="margin: 5px 0;">${s}</li>`).join('')}
                                        </ul>
                                        <p style="margin-top: 10px;">ï¼ˆä¸‰ï¼‰ç›¸é—œæ³•ä»¤ä¾æ“šï¼š${issue.lawBasis}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #764ba2; margin-bottom: 10px;">ä¼ã€è­‰æ“š</h4>
                        <p style="margin-left: 20px; line-height: 1.8;">
                            ä¸€ã€åŸè™•åˆ†å·å®—å½±æœ¬<br>
                            äºŒã€ç›¸é—œæ³•ä»¤æ¢æ–‡<br>
                            ä¸‰ã€é€šçŸ¥æ›¸åŠé€é”è­‰æ›¸<br>
                            å››ã€å…¶ä»–ç›¸é—œè­‰æ“šè³‡æ–™
                        </p>
                    </div>

                    <div>
                        <h4 style="color: #764ba2; margin-bottom: 10px;">é™¸ã€çµè«–</h4>
                        <p style="margin-left: 20px; line-height: 1.8;">
                            ç¶œä¸Šæ‰€è¿°ï¼ŒåŸè™•åˆ†ä¸¦ç„¡é•èª¤ï¼Œè¨´é¡˜ç‚ºç„¡ç†ç”±ï¼Œè«‹äºˆé§å›ã€‚
                        </p>
                    </div>
                </div>
            `;
        }

        function switchTab(tabName) {
            // æ›´æ–°æ¨™ç±¤æ¨£å¼
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // åˆ‡æ›å…§å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
        }

        function generateDraft() {
            updateStep(4);
            
            // é¡¯ç¤ºè¼‰å…¥å‹•ç•«
            document.getElementById('loadingSection').classList.add('active');
            
            setTimeout(() => {
                document.getElementById('loadingSection').classList.remove('active');
                
                // ç”Ÿæˆå®Œæ•´ç­”è¾¯æ›¸
                const draft = `
è¨´é¡˜ç­”è¾¯æ›¸

è¨´é¡˜äººï¼šâ—‹â—‹â—‹
åŸè™•åˆ†æ©Ÿé—œï¼šâ—‹â—‹å¸‚æ”¿åºœå·¥å‹™å±€

å—ç†è¨´é¡˜æ©Ÿé—œï¼šâ—‹â—‹å¸‚æ”¿åºœ éˆé‘’

ç‚ºè¨´é¡˜äººä¸æœæœ¬æ©Ÿé—œæ°‘åœ‹113å¹´5æœˆ1æ—¥â—‹â—‹å­—ç¬¬â—‹â—‹è™Ÿè™•åˆ†æ›¸ä¸€æ¡ˆï¼ŒèŒ²ä¾æ³•æå‡ºç­”è¾¯å¦‚ä¸‹ï¼š

å£¹ã€ç•¶äº‹äºº
    è¨´é¡˜äººï¼šâ—‹â—‹â—‹
    åŸè™•åˆ†æ©Ÿé—œï¼šâ—‹â—‹å¸‚æ”¿åºœå·¥å‹™å±€

è²³ã€è¨´é¡˜æ¨™çš„
    æœ¬æ©Ÿé—œæ–¼æ°‘åœ‹113å¹´5æœˆ1æ—¥ä»¥â—‹â—‹å­—ç¬¬â—‹â—‹è™Ÿå‡½æ‰€ç‚ºä¹‹è¡Œæ”¿è™•åˆ†ã€‚

åƒã€äº‹å¯¦ç¶“é
    ä¸€ã€æœ¬æ¡ˆç·£èµ·æ–¼æ°‘åœ‹113å¹´3æœˆ15æ—¥ï¼Œæœ¬æ©Ÿé—œæ¥ç²æª¢èˆ‰ï¼ŒæŒ‡è¨´é¡˜äººæ‰€æœ‰åè½â—‹â—‹å¸‚â—‹â—‹å€â—‹â—‹æ®µâ—‹â—‹åœ°è™ŸåœŸåœ°ä¸Šå»ºç¯‰ç‰©ï¼Œæ¶‰å«Œé•åå»ºç¯‰æ³•ç¬¬25æ¢è¦å®šï¼Œæ“…è‡ªå»ºé€ å»ºç¯‰ç‰©ã€‚

    äºŒã€æœ¬æ©Ÿé—œéš¨å³æ´¾å“¡æœƒåŒç›¸é—œäººå“¡æ–¼113å¹´3æœˆ20æ—¥å‰å¾€ç¾å ´å‹˜æŸ¥ï¼Œç¢ºèªè©²å»ºç¯‰ç‰©ç¢ºå¯¦æœªé ˜æœ‰å»ºç¯‰åŸ·ç…§å³æ“…è‡ªå»ºé€ ã€‚

    ä¸‰ã€æœ¬æ©Ÿé—œæ–¼113å¹´4æœˆ1æ—¥ä»¥â—‹â—‹å­—ç¬¬â—‹â—‹è™Ÿå‡½é€šçŸ¥è¨´é¡˜äººé™³è¿°æ„è¦‹ï¼Œä¸¦æª¢é™„é•è¦ç…§ç‰‡åŠç›¸é—œäº‹è­‰ã€‚è¨´é¡˜äººæ–¼113å¹´4æœˆ10æ—¥åˆ°æ©Ÿé—œé™³è¿°æ„è¦‹ã€‚

    å››ã€æœ¬æ©Ÿé—œå¯©é…Œå…¨æ¡ˆäº‹è­‰å¾Œï¼Œèªå®šè¨´é¡˜äººç¢ºæœ‰é•åå»ºç¯‰æ³•ç¬¬25æ¢è¦å®šä¹‹äº‹å¯¦ï¼Œçˆ°ä¾åŒæ³•ç¬¬86æ¢è¦å®šï¼Œæ–¼113å¹´5æœˆ1æ—¥ä½œæˆè™•åˆ†ï¼Œè™•è¨´é¡˜äººç½°é°æ–°è‡ºå¹£6è¬å…ƒæ•´ã€‚

è‚†ã€ç­”è¾¯ç†ç”±

    ä¸€ã€é‡å°è¨´é¡˜äººä¸»å¼µã€Œå»ºç¯‰ç‰©æ–¼90å¹´é–“å³å·²å­˜åœ¨ï¼Œéå…¶æ‰€å»ºã€ä¸€ç¯€ï¼š

        ï¼ˆä¸€ï¼‰è¨´é¡˜äººä¸»å¼µç•¥ä»¥ï¼šç³»çˆ­å»ºç¯‰ç‰©æ–¼90å¹´é–“å³å·²å­˜åœ¨ï¼Œä¸¦éè¨´é¡˜äººæ‰€å»ºé€ ï¼ŒåŸè™•åˆ†æ©Ÿé—œæœªæŸ¥æ˜äº‹å¯¦ï¼Œé€•äºˆè™•ç½°ï¼Œé¡¯æœ‰é•èª¤äº‘äº‘ã€‚

        ï¼ˆäºŒï¼‰æœ¬æ©Ÿé—œç­”è¾¯ï¼š
              1. ä¾å»ºç¯‰æ³•ç¬¬25æ¢åŠç¬¬9æ¢è¦å®šï¼Œæ‰€è¬‚ã€Œå»ºé€ ã€ä¿‚æŒ‡å»ºç¯‰ç‰©ä¹‹æ–°å»ºã€å¢å»ºã€æ”¹å»ºåŠä¿®å»ºï¼Œè€Œã€Œèµ·é€ äººã€å‰‡æŒ‡å»ºé€ å»ºç¯‰ç‰©ä¹‹ç”³è«‹äººã€‚
              
              2. ç¶“æŸ¥ï¼Œè¨´é¡˜äººä¿‚æ–¼103å¹´é–“å–å¾—ç³»çˆ­åœŸåœ°åŠå…¶ä¸Šå»ºç‰©ä¹‹æ‰€æœ‰æ¬Šï¼Œä¾åœŸåœ°ç™»è¨˜ç°¿è¬„æœ¬åŠå»ºç‰©æ¸¬é‡æˆæœåœ–æ‰€ç¤ºï¼Œç¾æ³å»ºç‰©é¢ç©èˆ‡103å¹´å–å¾—æ‰€æœ‰æ¬Šæ™‚ä¹‹é¢ç©ç›¸è¼ƒï¼Œå·²å¢åŠ ç´„50å¹³æ–¹å…¬å°ºã€‚
              
              3. æœ¬æ©Ÿé—œæ–¼ç¾å ´å‹˜æŸ¥æ™‚ï¼Œç™¼ç¾å¢å»ºéƒ¨åˆ†ä¹‹å»ºææ–°ç©ï¼Œä¸”èˆ‡åŸæœ‰å»ºç‰©ä¹‹å»ºæã€çµæ§‹æ˜é¡¯ä¸åŒï¼Œç¶“æ¯”å°èˆªç…§åœ–ï¼Œç¢ºèªè©²å¢å»ºéƒ¨åˆ†ä¿‚æ–¼105å¹´å¾Œå§‹å‡ºç¾ã€‚
              
              4. è¨´é¡˜äººé›–ä¸»å¼µå»ºç‰©æ—©å·²å­˜åœ¨ï¼ŒæƒŸå…¶æ‰€æŒ‡ä¿‚åŸæœ‰åˆæ³•å»ºç‰©éƒ¨åˆ†ï¼Œè‡³æ–¼å¢å»ºéƒ¨åˆ†ç¢ºå¯¦ä¿‚è¨´é¡˜äººå–å¾—æ‰€æœ‰æ¬Šå¾Œæ‰€ç‚ºï¼Œè¨´é¡˜äººèº«ç‚ºåœŸåœ°åŠå»ºç‰©æ‰€æœ‰æ¬Šäººï¼Œå°æ–¼å…¶æ‰€æœ‰åœŸåœ°ä¸Šä¹‹å¢å»ºè¡Œç‚ºï¼Œè‡ªæ‡‰è² èµ·é€ äººä¹‹è²¬ä»»ã€‚

        ï¼ˆä¸‰ï¼‰ç›¸é—œæ³•ä»¤ä¾æ“šï¼šå»ºç¯‰æ³•ç¬¬9æ¢ã€ç¬¬25æ¢ã€è¡Œæ”¿ç½°æ³•ç¬¬7æ¢ã€‚

    äºŒã€é‡å°è¨´é¡˜äººä¸»å¼µã€Œæœªç²é™³è¿°æ„è¦‹æ©Ÿæœƒã€ä¸€ç¯€ï¼š

        ï¼ˆä¸€ï¼‰è¨´é¡˜äººä¸»å¼µç•¥ä»¥ï¼šåŸè™•åˆ†æ©Ÿé—œæœªè¸è¡Œæ­£ç•¶æ³•å¾‹ç¨‹åºï¼Œæœªçµ¦äºˆè¨´é¡˜äººé™³è¿°æ„è¦‹ä¹‹æ©Ÿæœƒï¼Œç¨‹åºé¡¯æœ‰ç‘•ç–µäº‘äº‘ã€‚

        ï¼ˆäºŒï¼‰æœ¬æ©Ÿé—œç­”è¾¯ï¼š
              1. ä¾è¡Œæ”¿ç¨‹åºæ³•ç¬¬102æ¢è¦å®šï¼Œè¡Œæ”¿æ©Ÿé—œä½œæˆé™åˆ¶æˆ–å‰å¥ªäººæ°‘è‡ªç”±æˆ–æ¬Šåˆ©ä¹‹è¡Œæ”¿è™•åˆ†å‰ï¼Œæ‡‰çµ¦äºˆç›¸å°äººé™³è¿°æ„è¦‹ä¹‹æ©Ÿæœƒã€‚
              
              2. æœ¬æ©Ÿé—œæ–¼113å¹´4æœˆ1æ—¥å³ä»¥â—‹â—‹å­—ç¬¬â—‹â—‹è™Ÿå‡½é€šçŸ¥è¨´é¡˜äººåˆ°æ©Ÿé—œé™³è¿°æ„è¦‹ï¼Œè©²å‡½æ–‡ä¸¦æ–¼113å¹´4æœˆ3æ—¥åˆæ³•é€é”è¨´é¡˜äººï¼ˆæª¢é™„é€é”è­‰æ›¸å¦‚é™„ä»¶ä¸€ï¼‰ã€‚
              
              3. è¨´é¡˜äººæ–¼113å¹´4æœˆ10æ—¥è¦ªè‡ªåˆ°æ©Ÿé—œé™³è¿°æ„è¦‹ï¼Œæœ¬æ©Ÿé—œæ‰¿è¾¦äººå“¡è£½ä½œé™³è¿°æ„è¦‹ç´€éŒ„ï¼Œä¸¦ç¶“è¨´é¡˜äººç¢ºèªç„¡èª¤å¾Œç°½åï¼ˆæª¢é™„é™³è¿°æ„è¦‹ç´€éŒ„å¦‚é™„ä»¶äºŒï¼‰ã€‚
              
              4. æœ¬æ©Ÿé—œå·²ä¾æ³•çµ¦äºˆè¨´é¡˜äººå……åˆ†ä¹‹é™³è¿°æ„è¦‹æ©Ÿæœƒï¼Œç¨‹åºå®Œå‚™ï¼Œä¸¦ç„¡é•æ³•ä¹‹è™•ã€‚

        ï¼ˆä¸‰ï¼‰ç›¸é—œæ³•ä»¤ä¾æ“šï¼šè¡Œæ”¿ç¨‹åºæ³•ç¬¬102æ¢ã€‚

    ä¸‰ã€é‡å°è¨´é¡˜äººä¸»å¼µã€Œç½°é°é‡‘é¡éé«˜ã€ä¸€ç¯€ï¼š

        ï¼ˆä¸€ï¼‰è¨´é¡˜äººä¸»å¼µç•¥ä»¥ï¼šç½°é°6è¬å…ƒé‡‘é¡éé«˜ï¼Œä¸ç¬¦æ¯”ä¾‹åŸå‰‡äº‘äº‘ã€‚

        ï¼ˆäºŒï¼‰æœ¬æ©Ÿé—œç­”è¾¯ï¼š
              1. ä¾å»ºç¯‰æ³•ç¬¬86æ¢è¦å®šï¼Œé•åç¬¬25æ¢è¦å®šè€…ï¼Œè™•ä»¥å»ºç¯‰ç‰©é€ åƒ¹åƒåˆ†ä¹‹äº”åä»¥ä¸‹ç½°é°ã€‚
              
              2. æœ¬æ©Ÿé—œè¨‚æœ‰ã€Œé•åå»ºç¯‰æ³•æ¡ˆä»¶è£ç½°åŸºæº–ã€ï¼ˆæª¢é™„å¦‚é™„ä»¶ä¸‰ï¼‰ï¼Œé‡å°ä¸åŒé•è¦æ…‹æ¨£ã€é¢ç©ã€æƒ…ç¯€è¼•é‡ç­‰å› ç´ ï¼Œè¨‚æœ‰æ˜ç¢ºä¹‹è£ç½°æ¨™æº–ã€‚
              
              3. æœ¬æ¡ˆå¢å»ºé¢ç©ç´„50å¹³æ–¹å…¬å°ºï¼Œä¾å»ºç¯‰ç‰©é€ åƒ¹æ¨™æº–ï¼Œæ¯å¹³æ–¹å…¬å°ºé€ åƒ¹ç´„3è¬å…ƒï¼Œç¸½é€ åƒ¹ç´„150è¬å…ƒï¼Œä¾è£ç½°åŸºæº–ï¼Œç½°é°é‡‘é¡ç‚ºé€ åƒ¹ä¹‹4%ï¼Œå³6è¬å…ƒã€‚
              
              4. æœ¬æ©Ÿé—œå·²ä¾è£ç½°åŸºæº–å¯©é…Œå„é …å› ç´ å¾Œä½œæˆè™•åˆ†ï¼Œç½°é°é‡‘é¡é©ç•¶ï¼Œä¸¦ç„¡è£é‡ç‘•ç–µæˆ–é•åæ¯”ä¾‹åŸå‰‡ä¹‹æƒ…äº‹ã€‚
              
              5. åƒé…Œé¡ä¼¼æ¡ˆä¾‹ï¼ˆè‡ºåŒ—é«˜ç­‰è¡Œæ”¿æ³•é™¢109å¹´åº¦è¨´å­—ç¬¬456è™Ÿåˆ¤æ±ºï¼‰ï¼Œç›¸åŒé•è¦æƒ…ç¯€ä¹‹è£ç½°é‡‘é¡å‡åœ¨æ­¤ç¯„åœå…§ï¼Œæœ¬æ¡ˆè£ç½°ä¸¦ç„¡ä¸ç•¶ã€‚

        ï¼ˆä¸‰ï¼‰ç›¸é—œæ³•ä»¤ä¾æ“šï¼šå»ºç¯‰æ³•ç¬¬86æ¢ã€è¡Œæ”¿ç½°æ³•ç¬¬18æ¢ã€‚

ä¼ã€è­‰æ“š
    ä¸€ã€åŸè™•åˆ†å·å®—å½±æœ¬ä¹™ä»½
    äºŒã€ç›¸é—œæ³•ä»¤æ¢æ–‡
    ä¸‰ã€é™³è¿°æ„è¦‹é€šçŸ¥æ›¸åŠé€é”è­‰æ›¸ï¼ˆé™„ä»¶ä¸€ï¼‰
    å››ã€é™³è¿°æ„è¦‹ç´€éŒ„ï¼ˆé™„ä»¶äºŒï¼‰
    äº”ã€é•åå»ºç¯‰æ³•æ¡ˆä»¶è£ç½°åŸºæº–ï¼ˆé™„ä»¶ä¸‰ï¼‰
    å…­ã€ç¾å ´å‹˜æŸ¥ç…§ç‰‡åŠèˆªç…§åœ–æ¯”å°è³‡æ–™
    ä¸ƒã€åœŸåœ°ç™»è¨˜ç°¿è¬„æœ¬åŠå»ºç‰©æ¸¬é‡æˆæœåœ–

é™¸ã€çµè«–
    ç¶œä¸Šæ‰€è¿°ï¼Œæœ¬æ©Ÿé—œåŸè™•åˆ†èªäº‹ç”¨æ³•å‡ç„¡é•èª¤ï¼Œå·²çµ¦äºˆè¨´é¡˜äººå……åˆ†ä¹‹é™³è¿°æ„è¦‹æ©Ÿæœƒï¼Œç¨‹åºå®Œå‚™ï¼Œç½°é°é‡‘é¡ä¹‹è£é‡äº¦ç¬¦åˆæ³•ä»¤è¦å®šåŠæ¯”ä¾‹åŸå‰‡ï¼Œè¨´é¡˜ç‚ºç„¡ç†ç”±ï¼Œè«‹äºˆé§å›ã€‚

æ­¤è‡´
â—‹â—‹å¸‚æ”¿åºœ

                                        åŸè™•åˆ†æ©Ÿé—œï¼šâ—‹â—‹å¸‚æ”¿åºœå·¥å‹™å±€
                                        ä»£ è¡¨ äººï¼šâ—‹â—‹â—‹
                                        
ä¸­ è¯ æ°‘ åœ‹ 113 å¹´ 5 æœˆ 20 æ—¥

é™„ä»¶ï¼š
    ä¸€ã€é™³è¿°æ„è¦‹é€šçŸ¥æ›¸åŠé€é”è­‰æ›¸
    äºŒã€é™³è¿°æ„è¦‹ç´€éŒ„
    ä¸‰ã€é•åå»ºç¯‰æ³•æ¡ˆä»¶è£ç½°åŸºæº–
    å››ã€å…¶ä»–ç›¸é—œè­‰æ“šè³‡æ–™
                `;

                document.getElementById('draftOutput').textContent = draft;
                document.getElementById('draftSection').style.display = 'block';
                document.getElementById('draftSection').scrollIntoView({ behavior: 'smooth' });
                updateStep(5);
            }, 2000);
        }

        function editDraft() {
            const output = document.getElementById('draftOutput');
            const currentText = output.textContent;
            
            output.innerHTML = `<textarea style="width: 100%; min-height: 600px; padding: 15px; border: 2px solid #667eea; border-radius: 10px; font-family: 'Courier New', monospace;">${currentText}</textarea>`;
            
            const btnGroup = document.getElementById('draftSection').querySelector('.button-group');
            btnGroup.innerHTML = `
                <button class="btn-success" onclick="saveDraft()">ğŸ’¾ å„²å­˜ä¿®æ”¹</button>
                <button class="btn-secondary" onclick="cancelEdit()">âŒ å–æ¶ˆç·¨è¼¯</button>
            `;
        }

        function saveDraft() {
            const textarea = document.querySelector('#draftOutput textarea');
            const output = document.getElementById('draftOutput');
            output.textContent = textarea.value;
            
            const btnGroup = document.getElementById('draftSection').querySelector('.button-group');
            btnGroup.innerHTML = `
                <button class="btn-primary" onclick="editDraft()">âœï¸ é€²å…¥ç·¨è¼¯æ¨¡å¼</button>
                <button class="btn-secondary" onclick="regenerateDraft()">ğŸ”„ é‡æ–°ç”Ÿæˆ</button>
            `;
            
            alert('âœ“ ä¿®æ”¹å·²å„²å­˜ï¼');
        }

        function cancelEdit() {
            location.reload();
        }

        function regenerateDraft() {
            if (confirm('ç¢ºå®šè¦é‡æ–°ç”Ÿæˆç­”è¾¯æ›¸å—ï¼Ÿç›®å‰çš„ä¿®æ”¹å°‡æœƒéºå¤±ã€‚')) {
                generateDraft();
            }
        }

        function exportDraft() {
            const content = document.getElementById('draftOutput').textContent;
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'è¨´é¡˜ç­”è¾¯æ›¸_' + new Date().toISOString().slice(0,10) + '.txt';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('âœ“ ç­”è¾¯æ›¸å·²åŒ¯å‡ºï¼\n\nå¯¦éš›æ‡‰ç”¨æ™‚å¯åŒ¯å‡ºç‚ºWordæ ¼å¼ï¼Œä¸¦ä¿ç•™å®Œæ•´æ ¼å¼ã€‚');
        }
    </script>
</body>
</html>