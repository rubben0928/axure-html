<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨´é¡˜ç­”è¾¯æ›¸AIè¼”åŠ©ç³»çµ± Â· ç²¾ç°¡ç‰ˆ</title>
    <style>
        /* ===== å®Œå…¨æ¡ç”¨æœ€æ–°æä¾›çš„CSSæ’ç‰ˆï¼Œä¸å‹• ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'PingFang TC', 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .panel {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .panel-title {
            font-size: 1.5em;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .step-indicator {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .step {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: #f0f0f0;
            border-radius: 8px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .step.active {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        .step.completed {
            background: #28a745;
            color: white;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result-section {
            margin-top: 20px;
        }

        .issue-card {
            background: #f8f9ff;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .issue-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .issue-content {
            color: #555;
            line-height: 1.8;
        }

        .law-reference {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .law-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 8px;
        }

        .case-reference {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .case-title {
            font-weight: bold;
            color: #155724;
            margin-bottom: 8px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 25px;
            background: #f0f0f0;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .suggestion-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .output-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            border: 2px solid #dee2e6;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¤– è¨´é¡˜ç­”è¾¯æ›¸AIè¼”åŠ©ç³»çµ±</h1>
            <p class="subtitle">æ™ºèƒ½åˆ†æ Â· ç²¾æº–å»ºè­° Â· é«˜æ•ˆå”ä½œ</p>
        </header>

        <!-- æ­¥é©ŸæŒ‡ç¤ºå™¨ -->
        <div class="panel">
            <div class="step-indicator">
                <div class="step active" id="step1">1. ä¸Šå‚³è¨´é¡˜æ›¸</div>
                <div class="step" id="step2">2. AIåˆ†æçˆ­é»</div>
                <div class="step" id="step3">3. æ³•è¦æª¢ç´¢</div>
                <div class="step" id="step4">4. ç”Ÿæˆç­”è¾¯æ¶æ§‹</div>
                <div class="step" id="step5">5. å®Œæˆç­”è¾¯æ›¸</div>
            </div>
        </div>

        <div class="main-content">
            <!-- å·¦å´ï¼šè¼¸å…¥å€ - ç§»é™¤æª”æ¡ˆä¸Šå‚³åŠŸèƒ½ -->
            <div class="panel">
                <div class="panel-title">
                    ğŸ“ è¨´é¡˜æ›¸å…§å®¹è¼¸å…¥
                </div>

                <textarea id="appealInput" placeholder="è«‹è¼¸å…¥è¨´é¡˜äº‹å¯¦å…§å®¹">è«‹è¼¸å…¥è¨´é¡˜äº‹å¯¦å…§å®¹</textarea>

                <div class="button-group">
                    <button class="btn-primary" onclick="startAnalysis()">ğŸ” é–‹å§‹AIåˆ†æ</button>
                    <button class="btn-secondary" onclick="clearInput()">ğŸ—‘ï¸ æ¸…é™¤å…§å®¹</button>
                </div>
            </div>

            <!-- å³å´ï¼šAIåˆ†æçµæœ -->
            <div class="panel">
                <div class="panel-title">
                    ğŸ¤– AIåˆ†æçµæœ
                    <span id="analysisStatus" style="font-size: 0.8em; color: #999;">ç­‰å¾…è¼¸å…¥...</span>
                </div>

                <div id="loadingSection" class="loading">
                    <div class="spinner"></div>
                    <div>AIæ­£åœ¨åˆ†æä¸­...</div>
                    <div style="font-size: 0.9em; color: #999; margin-top: 10px;">é è¨ˆéœ€è¦ 5-10 ç§’</div>
                </div>

                <div id="resultSection" class="result-section" style="display: none;">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="stat-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="issueCount">0</div>
                            <div class="stat-label">çˆ­é»æ•¸é‡</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="lawCount">0</div>
                            <div class="stat-label">ç›¸é—œæ³•æ¢</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="caseCount">0</div>
                            <div class="stat-label">é¡ä¼¼æ¡ˆä¾‹</div>
                        </div>
                    </div>

                    <!-- åˆ†é æ¨™ç±¤ -->
                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('issues')">çˆ­é»æ•´ç†</button>
                        <button class="tab" onclick="switchTab('laws')">æ³•è¦æª¢ç´¢</button>
                        <button class="tab" onclick="switchTab('cases')">é¡ä¼¼æ¡ˆä¾‹</button>
                    </div>

                    <!-- çˆ­é»æ•´ç†å…§å®¹ (æ¨™é¡Œæ”¹ç‚ºäº‹å¯¦çˆ­é»1ã€äº‹å¯¦çˆ­é»2) -->
                    <div id="issues" class="tab-content active">
                        <div id="issuesContent"></div>
                    </div>

                    <!-- æ³•è¦æª¢ç´¢å…§å®¹ (ç„¡ç›¸é—œæ€§) -->
                    <div id="laws" class="tab-content">
                        <div id="lawsContent"></div>
                    </div>

                    <!-- é¡ä¼¼æ¡ˆä¾‹å…§å®¹ (ç„¡åƒè€ƒåƒ¹å€¼) -->
                    <div id="cases" class="tab-content">
                        <div id="casesContent"></div>
                    </div>

                    <div class="button-group" style="margin-top: 25px;">
                        <button class="btn-success" onclick="generateDraft()">ğŸ“„ ç”Ÿæˆç­”è¾¯æ›¸è‰ç¨¿</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç­”è¾¯æ›¸è‰ç¨¿è¼¸å‡º (ç²¾ç°¡ç‰ˆï¼Œç„¡çµè«–) -->
        <div class="panel full-width" id="draftSection" style="display: none;">
            <div class="panel-title">
                ğŸ“‹ ç­”è¾¯æ›¸è‰ç¨¿
                <button class="btn-primary" style="flex: none; padding: 10px 20px; font-size: 0.9em;" onclick="exportDraft()">ğŸ“¥ åŒ¯å‡ºWord</button>
            </div>
            <div id="draftOutput" class="output-section"></div>
            <div class="button-group" style="margin-top: 20px;">
                <button class="btn-primary" onclick="editDraft()">âœï¸ é€²å…¥ç·¨è¼¯æ¨¡å¼</button>
                <button class="btn-secondary" onclick="regenerateDraft()">ğŸ”„ é‡æ–°ç”Ÿæˆ</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let analysisData = null;

        function clearInput() {
            document.getElementById('appealInput').value = 'è«‹è¼¸å…¥è¨´é¡˜äº‹å¯¦å…§å®¹';
        }

        function updateStep(step) {
            for (let i = 1; i <= 5; i++) {
                const stepEl = document.getElementById('step' + i);
                stepEl.classList.remove('active', 'completed');
                if (i < step) {
                    stepEl.classList.add('completed');
                } else if (i === step) {
                    stepEl.classList.add('active');
                }
            }
            currentStep = step;
        }

        function startAnalysis() {
            const input = document.getElementById('appealInput').value.trim();
            if (!input || input === 'è«‹è¼¸å…¥è¨´é¡˜äº‹å¯¦å…§å®¹') {
                alert('è«‹å…ˆè¼¸å…¥è¨´é¡˜äº‹å¯¦å…§å®¹ï¼');
                return;
            }

            document.getElementById('loadingSection').classList.add('active');
            document.getElementById('resultSection').style.display = 'none';
            document.getElementById('analysisStatus').textContent = 'åˆ†æä¸­...';
            updateStep(2);

            setTimeout(() => {
                performAnalysis(input);
                document.getElementById('loadingSection').classList.remove('active');
                document.getElementById('resultSection').style.display = 'block';
                document.getElementById('analysisStatus').textContent = 'åˆ†æå®Œæˆ âœ“';
                document.getElementById('analysisStatus').style.color = '#28a745';
                updateStep(3);
            }, 2000);
        }

        function performAnalysis(input) {
            // æ¨¡æ“¬åˆ†æçµæœ â€” æ¨™é¡Œæ”¹ç‚ºäº‹å¯¦çˆ­é»1ã€äº‹å¯¦çˆ­é»2
            analysisData = {
                issues: [
                    {
                        id: 1,
                        type: 'fact',
                        title: 'äº‹å¯¦çˆ­é»1',
                        content: 'è¨´é¡˜äººä¸»å¼µç³»çˆ­åœŸåœ°ç‚ºç§æœ‰åœ°ï¼Œéé“è·¯ï¼Œå»ºè¨­å±€ç„¡é¤Šè­·ç´€éŒ„æ•…ä¸å¾—è£ç½°ã€‚',
                        lawBasis: 'è‡ºä¸­å¸‚é“è·¯ç®¡ç†è‡ªæ²»æ¢ä¾‹ç¬¬18æ¢ã€éƒ½å¸‚è¨ˆç•«æ³•è‡ºä¸­å¸‚æ–½è¡Œç´°å‰‡',
                        suggestions: [
                            'ä¾éƒ½ç™¼å±€107å¹´1æœˆ23æ—¥ä¸­å¸‚éƒ½æ¸¬å­—ç¬¬1070008526è™Ÿå‡½(è­‰å…­)ï¼Œç³»çˆ­åœŸåœ°å±¬ã€Œå¥—ç¹ªæœ‰æ¡ˆä¹‹ç¾æœ‰å··é“ã€ï¼Œå…·æœ‰å…¬ç”¨åœ°å½¹é—œä¿‚ï¼Œéè¨´é¡˜äººå¾—è‡ªè¡Œèªå®šã€‚',
                            'è‡ºåŒ—é«˜ç­‰è¡Œæ”¿æ³•é™¢101å¹´åº¦è¨´å­—ç¬¬253è™Ÿåˆ¤æ±ºæ„æ—¨ï¼šç¾æœ‰å··é“ä¸å› æ‰€æœ‰æ¬Šæ­¸å±¬æˆ–ç„¡é¤Šè­·ç´€éŒ„è€Œæ”¹è®Šå…¶å…¬çœ¾é€šè¡Œæ€§è³ªã€‚'
                        ]
                    },
                    {
                        id: 2,
                        type: 'fact',
                        title: 'äº‹å¯¦çˆ­é»2',
                        content: 'è¨´é¡˜äººå°æ–¼æœ‰ç„¡æŒ–æ˜ã€æ˜¯å¦å±†æœŸæœªæ”¹å–„æå‡ºçˆ­åŸ·ã€‚',
                        lawBasis: 'è‡ºä¸­å¸‚é“è·¯ç®¡ç†è‡ªæ²»æ¢ä¾‹ç¬¬34æ¢',
                        suggestions: [
                            'è­¦å¯Ÿå±€107å¹´3æœˆ19æ—¥ä¸­å¸‚è­¦å¤ªåˆ†äº¤å­—ç¬¬1070009943è™Ÿå‡½(è­‰äºŒ)æ˜ç¢ºèˆ‰ç™¼é•è¦æŒ–æ˜ï¼Œæœ¬å±€ä»¥107å¹´3æœˆ23æ—¥ä¸­å¸‚å»ºé¤Šé“å­—ç¬¬1070014272è™Ÿå‡½(è­‰ä¸‰)é™æœŸæ”¹å–„ï¼Œè¨´é¡˜äººé€¾æœŸæœªæ”¹å–„ï¼Œè£ç½°3è¬å…ƒç¬¦åˆæ³•å®šæœ€ä½é¡ï¼Œç„¡é•èª¤ã€‚',
                            'ã€Œç„¡é¤Šè­·ç´€éŒ„ã€ä¸ç­‰æ–¼ã€Œéé“è·¯ã€ï¼Œé¤Šè­·è²¬ä»»æ­¸å±¬(å…¬æ‰€)ä¸å½±éŸ¿é“è·¯å±¬æ€§ï¼Œè¨´é¡˜äººèª¤è§£æ³•ä»¤ã€‚'
                        ]
                    }
                ],
                laws: [
                    {
                        title: 'è‡ºä¸­å¸‚é“è·¯ç®¡ç†è‡ªæ²»æ¢ä¾‹ç¬¬18æ¢',
                        content: 'é“è·¯ç¯„åœå…§ä¹‹å´æºåŠè·¯é¢ï¼Œä¸å¾—ç ´å£ã€æ›´æ”¹åŠè¨­ç½®å¦¨ç¤™æ’æ°´æˆ–äº¤é€šå®‰å…¨ä¹‹è¨­æ–½ã€‚'
                    },
                    {
                        title: 'è‡ºä¸­å¸‚é“è·¯ç®¡ç†è‡ªæ²»æ¢ä¾‹ç¬¬34æ¢',
                        content: 'é•åç¬¬18æ¢ç¬¬1é …è¦å®šè€…ï¼Œè™•æ–°è‡ºå¹£ä¸‰è¬å…ƒä»¥ä¸Šåè¬å…ƒä»¥ä¸‹ç½°é°ï¼Œä¸¦å¾—å‘½é™æœŸæ”¹å–„ï¼›å±†æœŸæœªæ”¹å–„è€…ï¼Œå¾—æŒ‰æ¬¡è™•ç½°ã€‚'
                    },
                    {
                        title: 'è¡Œæ”¿ç¨‹åºæ³•ç¬¬74æ¢',
                        content: 'å¯„å­˜é€é”ä¹‹ç”Ÿæ•ˆè¦å®šã€‚'
                    }
                ],
                cases: [
                    {
                        title: 'è‡ºåŒ—é«˜ç­‰è¡Œæ”¿æ³•é™¢101å¹´åº¦è¨´å­—ç¬¬253è™Ÿåˆ¤æ±º',
                        summary: 'ç¾æœ‰å··é“ä¸å› æ‰€æœ‰æ¬Šæ­¸å±¬æˆ–ç„¡é¤Šè­·ç´€éŒ„è€Œæ”¹è®Šå…¶å…¬çœ¾é€šè¡Œæ€§è³ªã€‚'
                    },
                    {
                        title: 'æœ€é«˜è¡Œæ”¿æ³•é™¢104å¹´åº¦åˆ¤å­—ç¬¬345è™Ÿåˆ¤æ±º',
                        summary: 'å¯„å­˜é€é”ç¶“10æ—¥å³ç”Ÿæ•ˆåŠ›ï¼Œä¸å› ç•¶äº‹äººå¯¦éš›é ˜å–èˆ‡å¦è€Œå—å½±éŸ¿ã€‚'
                    }
                ]
            };

            document.getElementById('issueCount').textContent = analysisData.issues.length;
            document.getElementById('lawCount').textContent = analysisData.laws.length;
            document.getElementById('caseCount').textContent = analysisData.cases.length;

            renderIssues();
            renderLaws();
            renderCases();
        }

        function renderIssues() {
            const container = document.getElementById('issuesContent');
            container.innerHTML = '';

            analysisData.issues.forEach(issue => {
                // åªé¡¯ç¤ºäº‹å¯¦çˆ­é» (type ç‚º fact)
                if (issue.type !== 'fact') return;

                const issueCard = document.createElement('div');
                issueCard.className = 'issue-card';
                issueCard.innerHTML = `
                    <div class="issue-title">
                        ${issue.title}
                    </div>
                    <div class="issue-content">
                        <p><strong>çˆ­é»èªªæ˜ï¼š</strong>${issue.content}</p>
                        <p style="margin-top: 10px;"><strong>ç›¸é—œæ³•æ¢ï¼š</strong>${issue.lawBasis}</p>
                        <div class="suggestion-box" style="margin-top: 15px;">
                            <strong>ğŸ’¡ AIå»ºè­°ç­”è¾¯è¦é»ï¼š</strong>
                            <ul style="margin-top: 10px;">
                                ${issue.suggestions.map(s => `<li style="margin: 8px 0;">${s}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                container.appendChild(issueCard);
            });
        }

        function renderLaws() {
            const container = document.getElementById('lawsContent');
            container.innerHTML = '';

            analysisData.laws.forEach(law => {
                const lawCard = document.createElement('div');
                lawCard.className = 'law-reference';
                lawCard.innerHTML = `
                    <div class="law-title">ğŸ“– ${law.title}</div>
                    <p style="margin: 10px 0; line-height: 1.8;">${law.content}</p>
                `;
                container.appendChild(lawCard);
            });
        }

        function renderCases() {
            const container = document.getElementById('casesContent');
            container.innerHTML = '';

            analysisData.cases.forEach(caseRef => {
                const caseCard = document.createElement('div');
                caseCard.className = 'case-reference';
                caseCard.innerHTML = `
                    <div class="case-title">âš–ï¸ ${caseRef.title}</div>
                    <p style="margin: 10px 0; line-height: 1.8;"><strong>æ¡ˆä¾‹æ‘˜è¦ï¼š</strong>${caseRef.summary}</p>
                `;
                container.appendChild(caseCard);
            });
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
        }

        function generateDraft() {
            updateStep(4);
            document.getElementById('loadingSection').classList.add('active');

            setTimeout(() => {
                document.getElementById('loadingSection').classList.remove('active');

                // å–å¾—ä½¿ç”¨è€…è¼¸å…¥çš„äº‹å¯¦å…§å®¹
                const userInput = document.getElementById('appealInput').value.trim();

                // å¾çˆ­é»å–å‡ºæ‰€æœ‰å»ºè­°è¦é»
                let allSuggestions = [];
                analysisData.issues
                    .filter(issue => issue.type === 'fact')
                    .forEach(issue => {
                        issue.suggestions.forEach(suggestion => {
                            allSuggestions.push(suggestion);
                        });
                    });

                // å»ºç«‹å¸¶æœ‰ç·¨è™Ÿçš„å»ºè­°æ–‡å­— (å¾ä¸€ã€é–‹å§‹)
                let suggestionsNumbered = '';
                const numberMap = ['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹', 'å', 'åä¸€', 'åäºŒ', 'åä¸‰', 'åå››', 'åäº”'];
                
                for (let i = 0; i < allSuggestions.length; i++) {
                    const numberChar = numberMap[i] || (i + 1).toString();
                    suggestionsNumbered += `${numberChar}ã€\t${allSuggestions[i]}\n`;
                }

                // å–å¾—ç•¶å‰ç³»çµ±æ—¥æœŸ (æ°‘åœ‹å¹´)
                const today = new Date();
                const year = today.getFullYear() - 1911;
                const month = today.getMonth() + 1;
                const day = today.getDate();

                const draftContent = `è‡ºä¸­å¸‚æ”¿åºœå»ºè¨­å±€è¨´é¡˜ç­”è¾¯æ›¸

æ¡ˆ      è™Ÿï¼š
è¨´  é¡˜  äººï¼š
è¨­      å€ï¼š
åŸè™•åˆ†æ©Ÿé—œï¼šè‡ºä¸­å¸‚æ”¿åºœå»ºè¨­å±€
è¨­      å€ï¼š407è‡ºä¸­å¸‚è¥¿å±¯å€è‡ºç£å¤§é“ä¸‰æ®µ99è™Ÿ
ä»£  è¡¨  äººï¼šé»ƒç‰éœ–
å—ç†è¨´é¡˜æ©Ÿé—œï¼šè‡ºä¸­å¸‚æ”¿åºœè¨´é¡˜å¯©è­°å§”å“¡æœƒ

è¨´é¡˜äºº...

äº‹ã€€ã€€å¯¦ï¼š
${userInput}

ç†ã€€ã€€ç”±ï¼š
å£¹ã€ç¨‹åºéƒ¨åˆ†:

è²³ã€å¯¦é«”éƒ¨åˆ†:
${suggestionsNumbered || 'ä¸€ã€\tï¼ˆæ­¤è™•å¸¶å…¥çˆ­é»æ•´ç†çš„AIå»ºè­°ç­”è¾¯è¦é»ï¼‰'}

  æ•¬ã€€  é™³
è‡ºä¸­å¸‚æ”¿åºœè¨´é¡˜å¯©è­°å§”å“¡æœƒ

è­‰  ç‰©


ã€€ç­”è¾¯æ©Ÿé—œï¼šè‡ºä¸­å¸‚æ”¿åºœå»ºè¨­å±€ 
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä»£  è¡¨  äººï¼šé»ƒç‰éœ–

ä¸­ã€€è¯ã€€æ°‘ã€€åœ‹ã€€${year}ã€€å¹´ã€€${month}ã€€æœˆã€€${day}ã€€æ—¥
`;

                document.getElementById('draftOutput').textContent = draftContent;
                document.getElementById('draftSection').style.display = 'block';
                document.getElementById('draftSection').scrollIntoView({ behavior: 'smooth' });
                updateStep(5);
            }, 1000);
        }

        function editDraft() {
            const output = document.getElementById('draftOutput');
            const currentText = output.textContent;
            
            output.innerHTML = `<textarea style="width: 100%; min-height: 600px; padding: 15px; border: 2px solid #667eea; border-radius: 10px; font-family: 'Courier New', monospace;">${currentText}</textarea>`;
            
            const btnGroup = document.getElementById('draftSection').querySelector('.button-group');
            btnGroup.innerHTML = `
                <button class="btn-success" onclick="saveDraft()">ğŸ’¾ å„²å­˜ä¿®æ”¹</button>
                <button class="btn-secondary" onclick="cancelEdit()">âŒ å–æ¶ˆç·¨è¼¯</button>
            `;
        }

        function saveDraft() {
            const textarea = document.querySelector('#draftOutput textarea');
            const output = document.getElementById('draftOutput');
            output.textContent = textarea.value;
            
            const btnGroup = document.getElementById('draftSection').querySelector('.button-group');
            btnGroup.innerHTML = `
                <button class="btn-primary" onclick="editDraft()">âœï¸ é€²å…¥ç·¨è¼¯æ¨¡å¼</button>
                <button class="btn-secondary" onclick="regenerateDraft()">ğŸ”„ é‡æ–°ç”Ÿæˆ</button>
            `;
            alert('âœ“ ä¿®æ”¹å·²å„²å­˜ï¼');
        }

        function cancelEdit() {
            location.reload();
        }

        function regenerateDraft() {
            if (confirm('ç¢ºå®šè¦é‡æ–°ç”Ÿæˆç­”è¾¯æ›¸å—ï¼Ÿç›®å‰çš„ä¿®æ”¹å°‡æœƒéºå¤±ã€‚')) {
                generateDraft();
            }
        }

        function exportDraft() {
            const content = document.getElementById('draftOutput').textContent;
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'è¨´é¡˜ç­”è¾¯æ›¸_' + new Date().toISOString().slice(0,10) + '.txt';
            a.click();
            URL.revokeObjectURL(url);
            alert('âœ“ ç­”è¾¯æ›¸å·²åŒ¯å‡ºï¼');
        }
    </script>
</body>
</html>