<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµç®—ä¿å›ºç³»çµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background-color: #f5f7fa;
            color: #333;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .progress-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0;
            position: relative;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 4px;
            background: #e0e6ed;
            z-index: 1;
        }
        
        .progress-step {
            background: white;
            border: 4px solid #e0e6ed;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
            z-index: 2;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .progress-step.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }
        
        .progress-step.completed {
            border-color: #28a745;
            background: #28a745;
            color: white;
        }
        
        .step-label {
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            color: #666;
        }
        
        .step-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 30px;
            margin: 30px 0;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .file-upload {
            border: 2px dashed #667eea;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            background: #f8f9ff;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .file-upload:hover {
            background: #f0f2ff;
            border-color: #5a67d8;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 5px;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c82333;
        }
        
        .btn-info {
            background: #17a2b8;
            color: white;
        }
        
        .btn-info:hover {
            background: #138496;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-approved {
            background: #d4edda;
            color: #155724;
        }
        
        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }
        
        .document-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .warranty-item {
            background: #fff;
            border: 1px solid #e0e6ed;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .add-item-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 10px 0;
        }
        
        .add-item-btn:hover {
            background: #138496;
        }
        
        .hidden {
            display: none;
        }
        
        .checkbox-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin: 10px 0;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .export-section {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .status-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .review-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .save-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>çµç®—ä¿å›ºç³»çµ±</h1>
        <p>å·¥ç¨‹å°ˆæ¡ˆçµç®—èˆ‡ä¿å›ºç®¡ç†å¹³å°</p>
    </div>

    <div class="container">
        <!-- é€²åº¦æ¢ -->
        <div class="progress-bar">
            <div>
                <div class="progress-step active" id="step1" onclick="showStep(1)">1</div>
                <div class="step-label">ç¢ºèªé©—æ”¶å®Œæˆè³‡æ–™</div>
            </div>
            <div>
                <div class="progress-step" id="step2" onclick="showStep(2)">2</div>
                <div class="step-label">ç”¢å‡ºå·¥ç¨‹çµç®—é©—æ”¶è­‰æ˜</div>
            </div>
            <div>
                <div class="progress-step" id="step3" onclick="showStep(3)">3</div>
                <div class="step-label">ä¿å›ºä½œæ¥­</div>
            </div>
        </div>

        <!-- æ­¥é©Ÿ1ï¼šç¢ºèªé©—æ”¶å®Œæˆè³‡æ–™ -->
        <div class="step-content" id="content1">
            <h2>æ­¥é©Ÿ1ï¼šç¢ºèªé©—æ”¶å®Œæˆè³‡æ–™</h2>
            <p style="color: #666; margin-bottom: 20px;">è«‹æª¢æ ¸ç«£å·¥åœ–èªªèˆ‡å·¥ç¨‹çµç®—æ˜ç´°è¡¨æ˜¯å¦å·²æ­£ç¢ºä¸Šå‚³</p>
            
            <div class="document-item">
                <h3>ç«£å·¥åœ–èªª</h3>
                <div class="status-row">
                    <div class="status-left">
                        <label>ä¸Šå‚³ç‹€æ…‹ï¼š</label>
                        <span class="status-badge status-approved">å·²ä¸Šå‚³</span>
                    </div>
                    <button class="btn btn-primary">æª¢è¦–æª”æ¡ˆ</button>
                </div>
                <div class="form-group">
                    <div class="file-upload" onclick="document.getElementById('completionDrawings').click()">
                        <input type="file" id="completionDrawings" style="display: none;" multiple accept=".pdf,.dwg,.jpg,.png">
                        <p>ğŸ“ é»æ“Šä¸Šå‚³ç«£å·¥åœ–èªªæª”æ¡ˆ</p>
                        <small>æ”¯æ´æ ¼å¼ï¼šPDF, DWG, JPG, PNG</small>
                    </div>
                </div>
            </div>

            <div class="document-item">
                <h3>å·¥ç¨‹çµç®—æ˜ç´°è¡¨</h3>
                <div class="status-row">
                    <div class="status-left">
                        <label>ä¸Šå‚³ç‹€æ…‹ï¼š</label>
                        <span class="status-badge status-pending">å¾…å¯©æ ¸</span>
                    </div>
                    <button class="btn btn-primary">æª¢è¦–æª”æ¡ˆ</button>
                </div>
                <div class="form-group">
                    <div class="file-upload" onclick="document.getElementById('settlementDetails').click()">
                        <input type="file" id="settlementDetails" style="display: none;" multiple accept=".xlsx,.xls,.pdf">
                        <p>ğŸ“Š é»æ“Šä¸Šå‚³å·¥ç¨‹çµç®—æ˜ç´°è¡¨</p>
                        <small>æ”¯æ´æ ¼å¼ï¼šExcel, PDF</small>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="reviewComments">ç›£é€ å–®ä½å¯©æ ¸æ„è¦‹</label>
                <textarea id="reviewComments" rows="4" placeholder="è«‹è¼¸å…¥å¯©æ ¸æ„è¦‹..."></textarea>
                <div class="review-actions">
                    <button class="btn btn-success">æ ¸å‡†</button>
                    <button class="btn btn-danger">é€€å›</button>
                </div>
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-primary" onclick="nextStep(2)">ç¢ºèªå®Œæˆï¼Œé€²å…¥ä¸‹ä¸€æ­¥</button>
            </div>
        </div>

        <!-- æ­¥é©Ÿ2ï¼šç”¢å‡ºå·¥ç¨‹çµç®—é©—æ”¶è­‰æ˜ -->
        <div class="step-content hidden" id="content2">
            <h2>æ­¥é©Ÿ2ï¼šç”¢å‡ºå·¥ç¨‹çµç®—é©—æ”¶è­‰æ˜</h2>
            <p style="color: #666; margin-bottom: 20px;">æª¢æ ¸åŸºæœ¬è³‡æ–™ä¸¦ç”¢å‡ºé©—æ”¶è­‰æ˜æ›¸</p>
            
            <div class="grid">
                <div class="form-group">
                    <label for="contractNo">å¥‘ç´„è™Ÿ</label>
                    <input type="text" id="contractNo" value="CTR-2024-001" readonly>
                </div>
                <div class="form-group">
                    <label for="vendorName">å» å•†åç¨±</label>
                    <input type="text" id="vendorName" value="XXå»ºè¨­è‚¡ä»½æœ‰é™å…¬å¸" readonly>
                </div>
            </div>

            <div class="grid">
                <div class="form-group">
                    <label for="projectName">å·¥ç¨‹åç¨±</label>
                    <input type="text" id="projectName" value="å¸‚æ”¿å¤§æ¨“æ”¹å»ºå·¥ç¨‹" readonly>
                </div>
                <div class="form-group">
                    <label>æ¡è³¼é‡‘é¡</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="amountBelow" name="amountCategory" checked>
                            <label for="amountBelow">æœªé”å…¬å‘Šé‡‘é¡</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="amountLarge" name="amountCategory">
                            <label for="amountLarge">å·¨é¡æ¡è³¼</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid">
                <div class="form-group">
                    <label for="performancePeriod">å±¥ç´„æœŸé™</label>
                    <input type="text" id="performancePeriod" value="365å¤©" readonly>
                </div>
                <div class="form-group">
                    <label for="performanceLocation">å±¥ç´„åœ°é»</label>
                    <input type="text" id="performanceLocation" value="å°ä¸­å¸‚è¥¿å±¯å€" readonly>
                </div>
            </div>

            <div class="grid">
                <div class="form-group">
                    <label for="startDate">é–‹å·¥æ—¥æœŸ</label>
                    <input type="date" id="startDate" value="2024-01-15" readonly>
                </div>
                <div class="form-group">
                    <label for="expectedCompletionDate">é å®šç«£å·¥æ—¥æœŸ</label>
                    <input type="date" id="expectedCompletionDate" value="2025-01-14" readonly>
                </div>
            </div>

            <div class="grid">
                <div class="form-group">
                    <label for="nonCountDays">ä¸(å…)è¨ˆå…¥å·¥æœŸå¤©æ•¸</label>
                    <input type="number" id="nonCountDays" placeholder="è«‹è¼¸å…¥ä¸è¨ˆå…¥å·¥æœŸå¤©æ•¸" min="0">
                </div>
                <div class="form-group">
                    <label for="actualCompletionDate">å¯¦éš›ç«£å·¥æ—¥æœŸ</label>
                    <input type="date" id="actualCompletionDate" placeholder="è«‹é¸æ“‡å¯¦éš›ç«£å·¥æ—¥æœŸ">
                </div>
            </div>

            <div class="form-group">
                <label for="acceptanceStartDate">é–‹å§‹é©—æ”¶æ—¥æœŸ</label>
                <input type="date" id="acceptanceStartDate" placeholder="è«‹é¸æ“‡é–‹å§‹é©—æ”¶æ—¥æœŸ">
            </div>

            <div class="grid">
                <div class="form-group">
                    <label for="acceptanceDate">é©—æ”¶åˆæ ¼æ—¥æœŸ</label>
                    <input type="date" id="acceptanceDate" placeholder="è«‹é¸æ“‡é©—æ”¶åˆæ ¼æ—¥æœŸ">
                </div>
                <div class="form-group">
                    <label for="totalOverdueDays">å±¥ç´„é€¾æœŸç¸½å¤©æ•¸</label>
                    <input type="number" id="totalOverdueDays" placeholder="è«‹è¼¸å…¥å±¥ç´„é€¾æœŸç¸½å¤©æ•¸" min="0">
                </div>
            </div>

            <div class="grid">
                <div class="form-group">
                    <label for="exemptViolationDays">ä¸è¨ˆé•ç´„é‡‘å¤©æ•¸</label>
                    <input type="number" id="exemptViolationDays" placeholder="è«‹è¼¸å…¥ä¸è¨ˆé•ç´„é‡‘å¤©æ•¸" min="0">
                </div>
                <div class="form-group">
                    <label for="calculatedViolationDays">æ‡‰è¨ˆé•ç´„é‡‘å¤©æ•¸</label>
                    <input type="number" id="calculatedViolationDays" placeholder="è«‹è¼¸å…¥æ‡‰è¨ˆé•ç´„é‡‘å¤©æ•¸" min="0">
                </div>
            </div>

            <div class="form-group">
                <label for="overdueViolationAmount">é€¾æœŸé•ç´„é‡‘</label>
                <input type="number" id="overdueViolationAmount" placeholder="è«‹è¼¸å…¥é€¾æœŸé•ç´„é‡‘" min="0">
            </div>

            <div class="grid">
                <div class="form-group">
                    <label for="otherViolationAmount">å…¶ä»–é•ç´„é‡‘</label>
                    <input type="number" id="otherViolationAmount" placeholder="è«‹è¼¸å…¥å…¶ä»–é•ç´„é‡‘" min="0">
                </div>
                <div class="form-group">
                    <label for="finalContractAmount">å¥‘ç´„é‡‘é¡</label>
                    <input type="number" id="finalContractAmount" placeholder="è«‹è¼¸å…¥å¥‘ç´„é‡‘é¡" min="0">
                </div>
            </div>

            <div class="form-group">
                <h3>å¢æ¸›åƒ¹æ¬¾</h3>
                <div id="priceAdjustments">
                    <div class="warranty-item">
                        <h4>ç¬¬1æ¬¡å¢æ¸›</h4>
                        <div class="grid">
                            <div class="form-group">
                                <label>å¢æ¸›é‡‘é¡</label>
                                <input type="number" placeholder="è«‹è¼¸å…¥é‡‘é¡">
                            </div>
                            <div class="form-group">
                                <label>ç°½å‡†/æ ¸å‡†æ—¥æœŸ</label>
                                <input type="date">
                            </div>
                        </div>
                    </div>
                </div>
                <button class="add-item-btn" onclick="addPriceAdjustment()">+ æ–°å¢å¢æ¸›åƒ¹æ¬¾</button>
            </div>

            <div class="form-group">
                <h3>é©—æ”¶æ‰£æ¬¾</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>æ‰£æ¬¾èªªæ˜</label>
                        <textarea rows="3" placeholder="è«‹èªªæ˜æ‰£æ¬¾åŸå› æˆ–é …ç›®..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>æ‰£æ¬¾é‡‘é¡</label>
                        <input type="number" placeholder="è«‹è¼¸å…¥æ‰£æ¬¾é‡‘é¡" min="0">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <h3>æœ‰åƒ¹å»¢æ–™ç¹³ç´ç¸½é¡</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>å»¢æ–™é …ç›®èªªæ˜</label>
                        <textarea rows="3" placeholder="è«‹èªªæ˜æœ‰åƒ¹å»¢æ–™é …ç›®å…§å®¹..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>ç¹³ç´ç¸½é¡</label>
                        <input type="number" placeholder="è«‹è¼¸å…¥ç¹³ç´ç¸½é¡" min="0">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <h3>çµç®—ç¸½åƒ¹</h3>
                <input type="number" id="settlementTotalAmount" placeholder="è«‹è¼¸å…¥çµç®—ç¸½åƒ¹" min="0">
            </div>

            <div class="form-group">
                <h3>é©—æ”¶æ„è¦‹</h3>
                <textarea id="acceptanceOpinion" rows="4" placeholder="è«‹è¼¸å…¥é©—æ”¶æ„è¦‹..."></textarea>
            </div>

            <!-- å„²å­˜è³‡æ–™å€å¡Šç§»åˆ°é©—æ”¶æ„è¦‹ä¸‹æ–¹ -->
            <div class="save-section">
                <h3>ğŸ’¾ å„²å­˜è³‡æ–™</h3>
                <p>å„²å­˜ç•¶å‰å¡«å¯«çš„æ‰€æœ‰è³‡æ–™ï¼Œç¢ºä¿è³‡æ–™ä¸æœƒéºå¤±</p>
                <button class="btn btn-info" onclick="saveData()">å„²å­˜è³‡æ–™</button>
            </div>

            <div class="export-section">
                <h3>ğŸ–¨ï¸ åŒ¯å‡ºå·¥ç¨‹çµç®—é©—æ”¶è­‰æ˜æ›¸</h3>
                <p>ç³»çµ±å°‡æ ¹æ“šä¸Šè¿°è³‡æ–™è‡ªå‹•ç”¢ç”Ÿé©—æ”¶è­‰æ˜æ›¸</p>
                <button class="btn btn-primary">åŒ¯å‡ºPDF</button>
                <button class="btn btn-primary">åŒ¯å‡ºWord</button>
            </div>

            <div class="form-group">
                <h3>ä¸Šå‚³å·²ç°½ç½²çš„å·¥ç¨‹çµç®—é©—æ”¶è­‰æ˜æ›¸</h3>
                <div class="file-upload" onclick="document.getElementById('signedCertificate').click()">
                    <input type="file" id="signedCertificate" style="display: none;" accept=".pdf">
                    <p>ğŸ“„ é»æ“Šä¸Šå‚³å·²ç°½ç½²çš„é©—æ”¶è­‰æ˜æ›¸</p>
                    <small>æ”¯æ´æ ¼å¼ï¼šPDF</small>
                </div>
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-warning" onclick="showStep(1)">è¿”å›ä¸Šä¸€æ­¥</button>
                <button class="btn btn-primary" onclick="nextStep(3)">å®Œæˆï¼Œé€²å…¥ä¿å›ºä½œæ¥­</button>
            </div>
        </div>

        <!-- æ­¥é©Ÿ3ï¼šä¿å›ºä½œæ¥­ -->
        <div class="step-content hidden" id="content3">
            <h2>æ­¥é©Ÿ3ï¼šä¿å›ºä½œæ¥­</h2>
            <p style="color: #666; margin-bottom: 20px;">è¨­å®šä¿å›ºæœŸé–“èˆ‡é …ç›®ï¼Œä¸¦ä¸Šå‚³ç›¸é—œä¿å›ºæ–‡ä»¶</p>
            
            <div class="grid">
                <div class="form-group">
                    <label for="warrantyStartDate">ä¿å›ºé–‹å§‹æ—¥æœŸ *</label>
                    <input type="date" id="warrantyStartDate" required>
                </div>
                <div class="form-group">
                    <label for="warrantyEndDate">ä¿å›ºçµæŸæ—¥æœŸ *</label>
                    <input type="date" id="warrantyEndDate" required>
                </div>
            </div>

            <div class="form-group">
                <label for="warrantyAmount">ä¿å›ºé‡‘é¡ *</label>
                <input type="number" id="warrantyAmount" placeholder="è«‹è¼¸å…¥ä¿å›ºé‡‘é¡" required>
            </div>

            <div class="form-group">
                <h3>ä¿å›ºé …ç›®</h3>
                <div id="warrantyItems">
                    <div class="warranty-item">
                        <h4>ä¿å›ºé …ç›® #1</h4>
                        <div class="grid">
                            <div class="form-group">
                                <label>é …ç›®åç¨±</label>
                                <input type="text" placeholder="è«‹è¼¸å…¥ä¿å›ºé …ç›®åç¨±">
                            </div>
                            <div class="form-group">
                                <label>ä¿å›ºé¡å‹</label>
                                <select>
                                    <option value="">è«‹é¸æ“‡é¡å‹</option>
                                    <option value="structural">çµæ§‹ä¿å›º</option>
                                    <option value="equipment">è¨­å‚™ä¿å›º</option>
                                    <option value="materials">ææ–™ä¿å›º</option>
                                    <option value="others">å…¶ä»–</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ä¿å›ºå…§å®¹èªªæ˜</label>
                            <textarea rows="3" placeholder="è«‹è©³ç´°èªªæ˜ä¿å›ºå…§å®¹..."></textarea>
                        </div>
                        <button class="btn btn-danger" onclick="removeWarrantyItem(this)">ç§»é™¤æ­¤é …ç›®</button>
                    </div>
                </div>
                <button class="add-item-btn" onclick="addWarrantyItem()">+ æ–°å¢ä¿å›ºé …ç›®</button>
            </div>

            <div class="form-group">
                <h3>ä¸Šå‚³ä¿å›ºé‡‘/ä¿æ´»é‡‘æª”æ¡ˆ</h3>
                <div class="file-upload" onclick="document.getElementById('warrantyFiles').click()">
                    <input type="file" id="warrantyFiles" style="display: none;" multiple accept=".pdf,.jpg,.png">
                    <p>ğŸ’° é»æ“Šä¸Šå‚³ä¿å›ºé‡‘ç›¸é—œæª”æ¡ˆ</p>
                    <small>æ”¯æ´æ ¼å¼ï¼šPDF, JPG, PNG</small>
                </div>
            </div>

            <div class="form-group">
                <h3>ç›£é€ å–®ä½ç¢ºèª</h3>
                <div class="form-group">
                    <label for="supervisorWarrantyComments">ç›£é€ å–®ä½å¯©æ ¸æ„è¦‹</label>
                    <textarea id="supervisorWarrantyComments" rows="4" placeholder="è«‹è¼¸å…¥ç›£é€ å¯©æ ¸æ„è¦‹..."></textarea>
                    <div class="review-actions">
                        <button class="btn btn-success" onclick="approveWarranty()">æ ¸å‡†</button>
                        <button class="btn btn-danger" onclick="rejectWarranty()">é€€å›</button>
                    </div>
                </div>
            </div>

            <div style="text-align: right; margin-top: 30px;">
                <button class="btn btn-warning" onclick="showStep(2)">è¿”å›ä¸Šä¸€æ­¥</button>
                <button class="btn btn-success" onclick="completeProcess()">å®Œæˆä¿å›ºè¨­å®š</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let priceAdjustmentCount = 1;
        let warrantyItemCount = 1;

        function showStep(step) {
            // éš±è—æ‰€æœ‰æ­¥é©Ÿå…§å®¹
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`content${i}`).classList.add('hidden');
                document.getElementById(`step${i}`).classList.remove('active', 'completed');
            }
            
            // é¡¯ç¤ºç•¶å‰æ­¥é©Ÿ
            document.getElementById(`content${step}`).classList.remove('hidden');
            document.getElementById(`step${step}`).classList.add('active');
            
            // æ¨™è¨˜å·²å®Œæˆçš„æ­¥é©Ÿ
            for (let i = 1; i < step; i++) {
                document.getElementById(`step${i}`).classList.add('completed');
            }
            
            currentStep = step;
        }

        function nextStep(step) {
            showStep(step);
        }

        function addPriceAdjustment() {
            priceAdjustmentCount++;
            const container = document.getElementById('priceAdjustments');
            const newItem = document.createElement('div');
            newItem.className = 'warranty-item';
            newItem.innerHTML = `
                <h4>ç¬¬${priceAdjustmentCount}æ¬¡å¢æ¸›</h4>
                <div class="grid">
                    <div class="form-group">
                        <label>å¢æ¸›é‡‘é¡</label>
                        <input type="number" placeholder="è«‹è¼¸å…¥é‡‘é¡">
                    </div>
                    <div class="form-group">
                        <label>ç°½å‡†/æ ¸å‡†æ—¥æœŸ</label>
                        <input type="date">
                    </div>
                </div>
                <button class="btn btn-danger" onclick="removePriceAdjustment(this)">ç§»é™¤</button>
            `;
            container.appendChild(newItem);
        }

        function removePriceAdjustment(button) {
            button.parentElement.remove();
        }

        function addWarrantyItem() {
            warrantyItemCount++;
            const container = document.getElementById('warrantyItems');
            const newItem = document.createElement('div');
            newItem.className = 'warranty-item';
            newItem.innerHTML = `
                <h4>ä¿å›ºé …ç›® #${warrantyItemCount}</h4>
                <div class="grid">
                    <div class="form-group">
                        <label>é …ç›®åç¨±</label>
                        <input type="text" placeholder="è«‹è¼¸å…¥ä¿å›ºé …ç›®åç¨±">
                    </div>
                    <div class="form-group">
                        <label>ä¿å›ºé¡å‹</label>
                        <select>
                            <option value="">è«‹é¸æ“‡é¡å‹</option>
                            <option value="structural">çµæ§‹ä¿å›º</option>
                            <option value="equipment">è¨­å‚™ä¿å›º</option>
                            <option value="materials">ææ–™ä¿å›º</option>
                            <option value="others">å…¶ä»–</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>ä¿å›ºå…§å®¹èªªæ˜</label>
                    <textarea rows="3" placeholder="è«‹è©³ç´°èªªæ˜ä¿å›ºå…§å®¹..."></textarea>
                </div>
                <button class="btn btn-danger" onclick="removeWarrantyItem(this)">ç§»é™¤æ­¤é …ç›®</button>
            `;
            container.appendChild(newItem);
        }

        function removeWarrantyItem(button) {
            button.parentElement.remove();
        }

        function approveWarranty() {
            const warrantyStartDate = document.getElementById('warrantyStartDate').value;
            const warrantyEndDate = document.getElementById('warrantyEndDate').value;
            const warrantyAmount = document.getElementById('warrantyAmount').value;
            
            if (!warrantyStartDate || !warrantyEndDate || !warrantyAmount) {
                alert('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½ï¼');
                return;
            }
            
            alert('ä¿å›ºè³‡æ–™å·²æ ¸å‡†ï¼');
            document.getElementById('step3').classList.add('completed');
        }

        function rejectWarranty() {
            alert('ä¿å›ºè³‡æ–™å·²é€€å›ï¼Œè«‹ä¿®æ”¹å¾Œé‡æ–°æäº¤ï¼');
        }

        function saveData() {
            alert('è³‡æ–™å·²å„²å­˜ï¼');
        }

        function completeProcess() {
            if (confirm('ç¢ºå®šè¦å®Œæˆä¿å›ºè¨­å®šå—ï¼Ÿå®Œæˆå¾Œå°‡ç„¡æ³•ä¿®æ”¹è³‡æ–™ï¼')) {
                alert('ä¿å›ºè¨­å®šå·²å®Œæˆï¼');
                document.getElementById('step3').classList.add('completed');
            }
        }
    </script>
</body>
</html>